<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="lightgray" />
    <link rel="stylesheet" href="https://unpkg.com/higlass@1.11.3/dist/hglib.css">
</head>

<body
    style="font-family: 'Roboto Condensed', Roboto, -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">
    <h1>Gosling Theme</h1>
    <select name="demo" onChange="demo(this)">
        <option value='light'>light</option>
        <option value='dark'>dark</option>
        <option value='ensembl'>ensembl</option>
        <option value='excel'>excel</option>
        <option value='ggplot'>ggplot</option>
        <option value='google'>google</option>
        <option value='igv'>igv</option>
        <option value='jbrowse'>jbrowse</option>
        <option value='ucsc'>ucsc</option>
        <option value='warm'>warm</option>
        <option value='washu'>washu</option>
        <!-- Add More ... -->
    </select>
    <div id="root" />
    <script crossorigin type="text/javascript" src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin type="text/javascript"
        src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script crossorigin type="text/javascript" src="https://unpkg.com/pixi.js@5/dist/pixi.js"></script>
    <script crossorigin type="text/javascript" src="https://unpkg.com/gosling.js@0.8.7/dist/gosling.js"></script>
    <script crossorigin type="text/javascript" src="dist/gosling-theme.js"></script>
</body>
<script>
    console.log(`Gosling v${gosling.version}`);
    console.log(`goslingTheme`, goslingTheme);
    console.log('goslingTheme.Themes', goslingTheme.Themes);

    Object.keys(goslingTheme.Themes)

    let selectedDemo = 'light';
    updateDemo();
    
    function demo(event) {
        const themeName = event.value; // e.g., "washu"
        selectedDemo = goslingTheme.IsThereTheme(themeName) ? themeName : event.value;

        updateDemo();
    }

    function updateDemo() {
        gosling.embed(
            document.getElementById('root'),
            {
                // "title": "Gosling Theme",
                // "subtitle": "This example shows gosling visualization with theme",
                "layout": "linear",
                "arrangement": "vertical",
                "centerRadius": 0.8,
                "xDomain": { "chromosome": "1", "interval": [1, 3000500] },
                "views": [
                    {
                        "id": "view-1",
                        "tracks": [
                            {
                                "data": {
                                    "url": "https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",
                                    "type": "multivec",
                                    "row": "sample",
                                    "column": "position",
                                    "value": "peak",
                                    "categories": ["sample 1", "sample 2", "sample 3", "sample 4"],
                                    "binSize": 4
                                },
                                "mark": "rect",
                                "x": { "field": "start", "type": "genomic", "axis": "top" },
                                "xe": { "field": "end", "type": "genomic" },
                                "row": { "field": "sample", "type": "nominal", "legend": true },
                                "color": { "field": "peak", "type": "quantitative", "legend": true },
                                "tooltip": [
                                    { "field": "start", "type": "genomic", "alt": "Start Position" },
                                    { "field": "end", "type": "genomic", "alt": "End Position" },
                                    {
                                        "field": "peak",
                                        "type": "quantitative",
                                        "alt": "Value",
                                        "format": ".2"
                                    },
                                    { "field": "sample", "type": "nominal", "alt": "Sample" }
                                ],
                                "width": 600,
                                "height": 130
                            }
                        ]
                    },
                    {
                        "tracks": [
                            {
                                "data": {
                                    "url": "https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",
                                    "type": "multivec",
                                    "row": "sample",
                                    "column": "position",
                                    "value": "peak",
                                    "categories": ["sample 1", "sample 2", "sample 3", "sample 4"]
                                },
                                "mark": "bar",
                                "x": { "field": "position", "type": "genomic", "axis": "top" },
                                "y": { "field": "peak", "type": "quantitative" },
                                "row": { "field": "sample", "type": "nominal" },
                                "color": { "field": "sample", "type": "nominal", "legend": true },
                                "tooltip": [
                                    { "field": "position", "type": "genomic", "alt": "Position" },
                                    {
                                        "field": "peak",
                                        "type": "quantitative",
                                        "alt": "Value",
                                        "format": ".2"
                                    },
                                    { "field": "sample", "type": "nominal", "alt": "Sample" }
                                ],
                                "width": 600,
                                "height": 130
                            }
                        ]
                    },
                    {
                        "tracks": [
                            {
                                "data": {
                                    "url": "https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",
                                    "type": "multivec",
                                    "row": "sample",
                                    "column": "position",
                                    "value": "peak",
                                    "categories": ["sample 1", "sample 2", "sample 3", "sample 4"]
                                },
                                "mark": "bar",
                                "x": { "field": "position", "type": "genomic", "axis": "top" },
                                "y": { "field": "peak", "type": "quantitative", "grid": true },
                                "color": { "field": "sample", "type": "nominal", "legend": true },
                                "tooltip": [
                                    { "field": "position", "type": "genomic", "alt": "Position" },
                                    {
                                        "field": "peak",
                                        "type": "quantitative",
                                        "alt": "Value",
                                        "format": ".2"
                                    },
                                    { "field": "sample", "type": "nominal", "alt": "Sample" }
                                ],
                                "width": 600,
                                "height": 130
                            }
                        ]
                    },
                    {
                        "alignment": "overlay",
                        "data": {
                            "url": "https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",
                            "type": "multivec",
                            "row": "sample",
                            "column": "position",
                            "value": "peak",
                            "categories": ["sample 1", "sample 2", "sample 3", "sample 4"]
                        },
                        "x": { "field": "position", "type": "genomic", "axis": "top" },
                        "y": { "field": "peak", "type": "quantitative" },
                        "row": { "field": "sample", "type": "nominal" },
                        "color": { "field": "sample", "type": "nominal", "legend": true },
                        "tracks": [
                            { "mark": "line" },
                            {
                                "mark": "point",
                                "size": { "field": "peak", "type": "quantitative", "range": [0, 2] }
                            }
                        ],
                        "tooltip": [
                            { "field": "position", "type": "genomic", "alt": "Position" },
                            {
                                "field": "peak",
                                "type": "quantitative",
                                "alt": "Value",
                                "format": ".2"
                            },
                            { "field": "sample", "type": "nominal", "alt": "Sample" }
                        ],
                        "width": 600,
                        "height": 130
                    },
                    {
                        "tracks": [
                            {
                                "data": {
                                    "url": "https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",
                                    "type": "multivec",
                                    "row": "sample",
                                    "column": "position",
                                    "value": "peak",
                                    "categories": ["sample 1", "sample 2", "sample 3", "sample 4"]
                                },
                                "mark": "point",
                                "x": { "field": "position", "type": "genomic", "axis": "top" },
                                "y": { "field": "peak", "type": "quantitative" },
                                "row": { "field": "sample", "type": "nominal" },
                                "size": { "field": "peak", "type": "quantitative" },
                                "color": { "field": "sample", "type": "nominal", "legend": true },
                                "opacity": { "value": 0.5 },
                                "tooltip": [
                                    { "field": "position", "type": "genomic", "alt": "Position" },
                                    {
                                        "field": "peak",
                                        "type": "quantitative",
                                        "alt": "Value",
                                        "format": ".2"
                                    },
                                    { "field": "sample", "type": "nominal", "alt": "Sample" }
                                ],
                                "width": 600,
                                "height": 130
                            }
                        ]
                    },
                    {
                        "tracks": [
                            {
                                "data": {
                                    "url": "https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",
                                    "type": "multivec",
                                    "row": "sample",
                                    "column": "position",
                                    "value": "peak",
                                    "categories": ["sample 1", "sample 2", "sample 3", "sample 4"]
                                },
                                "mark": "point",
                                "x": { "field": "position", "type": "genomic", "axis": "top" },
                                "y": { "field": "peak", "type": "quantitative", "grid": true },
                                "size": { "field": "peak", "type": "quantitative" },
                                "color": { "field": "sample", "type": "nominal", "legend": true },
                                "opacity": { "value": 0.5 },
                                "tooltip": [
                                    { "field": "position", "type": "genomic", "alt": "Position" },
                                    {
                                        "field": "peak",
                                        "type": "quantitative",
                                        "alt": "Value",
                                        "format": ".2"
                                    },
                                    { "field": "sample", "type": "nominal", "alt": "Sample" }
                                ],
                                "width": 600,
                                "height": 130
                            }
                        ]
                    },
                    {
                        "tracks": [
                            {
                                "data": {
                                    "url": "https://server.gosling-lang.org/api/v1/tileset_info/?d=cistrome-multivec",
                                    "type": "multivec",
                                    "row": "sample",
                                    "column": "position",
                                    "value": "peak",
                                    "categories": ["sample 1", "sample 2", "sample 3", "sample 4"]
                                },
                                "mark": "area",
                                "x": { "field": "position", "type": "genomic", "axis": "top" },
                                "y": { "field": "peak", "type": "quantitative" },
                                "row": { "field": "sample", "type": "nominal" },
                                "color": { "field": "sample", "type": "nominal", "legend": true },
                                "stroke": { "value": "white" },
                                "strokeWidth": { "value": 0.5 },
                                "tooltip": [
                                    { "field": "position", "type": "genomic", "alt": "Position" },
                                    {
                                        "field": "peak",
                                        "type": "quantitative",
                                        "alt": "Value",
                                        "format": ".2"
                                    },
                                    { "field": "sample", "type": "nominal", "alt": "Sample" }
                                ],
                                "width": 600,
                                "height": 130
                            }
                        ]
                    },
                    {
                        "tracks": [
                            {
                                "data": {
                                    "url": "https://raw.githubusercontent.com/sehilyi/gemini-datasets/master/data/circos-segdup-edited.txt",
                                    "type": "csv",
                                    "chromosomeField": "c2",
                                    "genomicFields": ["s1", "e1", "s2", "e2"]
                                },
                                "mark": "withinLink",
                                "x": {
                                    "field": "s1",
                                    "type": "genomic",
                                    "domain": { "chromosome": "1", "interval": [103900000, 104100000] }
                                },
                                "xe": { "field": "e1", "type": "genomic" },
                                "x1": {
                                    "field": "s2",
                                    "type": "genomic",
                                    "domain": { "chromosome": "1" }
                                },
                                "x1e": { "field": "e2", "type": "genomic" },
                                "color": { "field": "s1", "type": "nominal" },
                                "stroke": { "value": "black" },
                                "strokeWidth": { "value": 0.5 },
                                "opacity": { "value": 0.2 },
                                "width": 600,
                                "height": 130
                            }
                        ]
                    }
                ]
            },
            {
                theme: goslingTheme.Themes[selectedDemo]
            }
        );
    }
</script>

</html>
